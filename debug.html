<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FitTracker ãƒ‡ãƒãƒƒã‚°ç‰ˆ</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <meta name="theme-color" content="#4CAF50">
  <style>
    .debug-info {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-size: 12px;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <div class="debug-info" id="debugInfo">
    JavaScriptèª­ã¿è¾¼ã¿ä¸­...
  </div>

  <div class="app">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
      <h1>FitTracker (ãƒ‡ãƒãƒƒã‚°ç‰ˆ)</h1>
      <div class="date" id="currentDate"></div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main">
      <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
      <nav class="nav">
        <button class="nav-btn active" data-tab="dashboard">
          <span class="icon">ğŸ“Š</span>
          <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
        </button>
        <button class="nav-btn" data-tab="food">
          <span class="icon">ğŸ½ï¸</span>
          <span>é£Ÿäº‹è¨˜éŒ²</span>
        </button>
        <button class="nav-btn" data-tab="weight">
          <span class="icon">âš–ï¸</span>
          <span>ä½“é‡è¨˜éŒ²</span>
        </button>
        <button class="nav-btn" data-tab="photo">
          <span class="icon">ğŸ“·</span>
          <span>å†™çœŸè¨˜éŒ²</span>
        </button>
        <button class="nav-btn" data-tab="stats">
          <span class="icon">ğŸ“ˆ</span>
          <span>çµ±è¨ˆ</span>
        </button>
      </nav>

      <!-- é£Ÿäº‹è¨˜éŒ²ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰ -->
      <section class="tab-content" id="food">
        <div class="food-section">
          <div class="food-header">
            <h2>é£Ÿäº‹è¨˜éŒ²</h2>
            <div class="mode-toggle">
              <label class="toggle-label">
                <input type="checkbox" id="detailModeToggle">
                <span class="toggle-slider"></span>
                <span class="toggle-text">è©³ç´°ãƒ¢ãƒ¼ãƒ‰</span>
              </label>
            </div>
          </div>

          <!-- ç°¡æ˜“ç‰ˆãƒ•ã‚©ãƒ¼ãƒ  -->
          <form class="food-form simple-form" id="simpleFoodForm">
            <div class="form-group">
              <label for="simpleFoodName">é£Ÿå“å</label>
              <input type="text" id="simpleFoodName" placeholder="ä¾‹: ã”é£¯ã€ã‚µãƒ©ãƒ€ã€ã‚³ãƒ¼ãƒ’ãƒ¼ãªã©" required>
            </div>
            <div class="form-group">
              <label for="simpleCalories">ã‚«ãƒ­ãƒªãƒ¼ (kcal)</label>
              <input type="number" id="simpleCalories" placeholder="ä¾‹: 300" required>
            </div>
            <div class="form-group">
              <label for="simpleMemo">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</label>
              <textarea id="simpleMemo" placeholder="ä¾‹: æœé£Ÿã€å¤–é£Ÿã€ãŠæ°—ã«å…¥ã‚Šãªã©" rows="2"></textarea>
            </div>
            <button type="submit" class="btn-primary">ç°¡å˜è¨˜éŒ²</button>
          </form>

          <!-- è©³ç´°ç‰ˆãƒ•ã‚©ãƒ¼ãƒ  -->
          <form class="food-form detail-form" id="detailFoodForm" style="display: none;">
            <div class="form-group">
              <label for="detailFoodName">é£Ÿå“å</label>
              <input type="text" id="detailFoodName" required>
            </div>
            <div class="form-group">
              <label for="foodWeight">é‡é‡ (g)</label>
              <input type="number" id="foodWeight" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="proteinPer100">ã‚¿ãƒ³ãƒ‘ã‚¯è³ª (g/100g)</label>
                <input type="number" step="0.1" id="proteinPer100" required>
              </div>
              <div class="form-group">
                <label for="fatPer100">è„‚è³ª (g/100g)</label>
                <input type="number" step="0.1" id="fatPer100" required>
              </div>
              <div class="form-group">
                <label for="carbsPer100">ç‚­æ°´åŒ–ç‰© (g/100g)</label>
                <input type="number" step="0.1" id="carbsPer100" required>
              </div>
            </div>
            <div class="form-group">
              <label for="detailMemo">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</label>
              <textarea id="detailMemo" placeholder="èª¿ç†æ–¹æ³•ã€ãƒ–ãƒ©ãƒ³ãƒ‰ãªã©" rows="2"></textarea>
            </div>
            <button type="submit" class="btn-primary">è©³ç´°è¨˜éŒ²</button>
          </form>

          <!-- å±¥æ­´ã‹ã‚‰é¸æŠ -->
          <div class="history-selector">
            <h3>å±¥æ­´ã‹ã‚‰é¸æŠ</h3>
            <div class="history-search">
              <input type="text" id="historySearch" placeholder="é£Ÿå“åã§æ¤œç´¢...">
            </div>
            <div class="history-items" id="historyItems"></div>
          </div>
          
          <div class="food-list">
            <h3>ä»Šæ—¥ã®é£Ÿäº‹å±¥æ­´</h3>
            <div id="foodHistory"></div>
          </div>
        </div>
      </section>

      <!-- ãã®ä»–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯çœç•¥ -->
      <section class="tab-content active" id="dashboard">
        <div class="dashboard">
          <h3>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰</h3>
          <p>é£Ÿäº‹è¨˜éŒ²ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„</p>
        </div>
      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // ãƒ‡ãƒãƒƒã‚°ç”¨ã®ã‚·ãƒ³ãƒ—ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³
    let debugInfo = document.getElementById('debugInfo');
    debugInfo.textContent = 'JavaScriptèª­ã¿è¾¼ã¿å®Œäº†';

    // åŸºæœ¬çš„ãªã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ãƒ†ã‚¹ãƒˆ
    document.addEventListener('DOMContentLoaded', () => {
      debugInfo.textContent = 'DOMèª­ã¿è¾¼ã¿å®Œäº†';
      
      // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
      const navBtns = document.querySelectorAll('.nav-btn');
      const tabContents = document.querySelectorAll('.tab-content');

      navBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const tabName = btn.dataset.tab;
          debugInfo.textContent = `ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ: ${tabName}`;
          
          navBtns.forEach(b => b.classList.remove('active'));
          tabContents.forEach(t => t.classList.remove('active'));
          
          btn.classList.add('active');
          document.getElementById(tabName).classList.add('active');
        });
      });

      // è©³ç´°ãƒ¢ãƒ¼ãƒ‰ãƒˆã‚°ãƒ«
      const detailToggle = document.getElementById('detailModeToggle');
      if (detailToggle) {
        detailToggle.addEventListener('change', (e) => {
          const simpleForm = document.querySelector('.simple-form');
          const detailForm = document.querySelector('.detail-form');
          
          if (e.target.checked) {
            simpleForm.style.display = 'none';
            detailForm.style.display = 'block';
            debugInfo.textContent = 'è©³ç´°ãƒ¢ãƒ¼ãƒ‰ ON';
          } else {
            simpleForm.style.display = 'block';
            detailForm.style.display = 'none';
            debugInfo.textContent = 'ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ ON';
          }
        });
      }

      // ç°¡æ˜“ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
      const simpleForm = document.getElementById('simpleFoodForm');
      if (simpleForm) {
        simpleForm.addEventListener('submit', (e) => {
          e.preventDefault();
          debugInfo.textContent = 'ç°¡æ˜“ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æˆåŠŸï¼';
          
          const name = document.getElementById('simpleFoodName').value;
          const calories = document.getElementById('simpleCalories').value;
          
          alert(`é£Ÿäº‹è¨˜éŒ²: ${name} - ${calories}kcal`);
          simpleForm.reset();
        });
      }

      // è©³ç´°ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
      const detailForm = document.getElementById('detailFoodForm');
      if (detailForm) {
        detailForm.addEventListener('submit', (e) => {
          e.preventDefault();
          debugInfo.textContent = 'è©³ç´°ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æˆåŠŸï¼';
          
          const name = document.getElementById('detailFoodName').value;
          const weight = document.getElementById('foodWeight').value;
          
          alert(`è©³ç´°è¨˜éŒ²: ${name} - ${weight}g`);
          detailForm.reset();
        });
      }

      debugInfo.textContent = 'ã™ã¹ã¦ã®æ©Ÿèƒ½æº–å‚™å®Œäº†';
    });
  </script>
</body>
</html>